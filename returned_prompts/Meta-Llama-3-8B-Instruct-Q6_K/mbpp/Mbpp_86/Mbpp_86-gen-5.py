The centered hexagonal numbers are generated by the formula: Hn = n*(2n-1) - n.
Here is the Python function that calculates the nth centered hexagonal number:

```
def centered_hexagonal_number(n):
    return n * (2 * n - 1) - n
```

This function takes an integer n as input and returns the nth centered hexagonal number. The unit test `assert centered_hexagonal_number(10) == 271` ensures that the function is working correctly. 

For example, `centered_hexagonal_number(10)` returns `271`, which is the 10th centered hexagonal number. 

This function can be used to calculate any centered hexagonal number for a given input.  If the input is not a positive integer, the function will return incorrect results.  Therefore, it's recommended to validate the input before calling the function.  For example:

```
def centered_hexagonal_number(n):
    if not isinstance(n, int) or n <= 0:
        return None
    return n * (2 * n - 1) - n
``` 