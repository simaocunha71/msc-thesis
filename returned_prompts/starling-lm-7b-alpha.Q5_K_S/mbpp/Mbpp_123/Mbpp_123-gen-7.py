def amicable_numbers_sum(n):
    """
    >>> amicable_numbers_sum(999)==504
    True
    """
    # sum of all amicable numbers
    # from 1 to a specified number
    #
    # step 1: create an empty dictionary called amicable_numbers
    # step 2: add each number from 1 to a specified number to
    #         the dictionary
    # step 3: check if each number is an amicable number
    # step 4: if the number is an amicable number, add its sum
    #         to the dictionary
    # step 5: return the sum of all amicable numbers

    def is_amicable_number(number):
        # step 3: check if each number is an amicable number
        # step 4: if the number is an amicable number, add its sum
        #         to the dictionary
        # step 6: create an empty dictionary called amicable_numbers
        # step 7: add each number from 1 to number to the dictionary
        # step 8: check if each number is an amicable number
        # step 9: if the number is an amicable number, add its sum
        #         to the dictionary
        # step 10: return the sum of all amicable numbers
        # step 11: if the number is not an amicable number, return False
        # step 12: if the number is an amicable number, return True
        # step 13: if the number is not an amicable number, return False
        # step 14: if the number is an amicable number, return True
        # step 15: if the number is not an amicable number, return False
        # step 16: if the number is an amicable number, return True
        # step 17: if the number is not an amicable number, return False
        # step 18: if the number is an amicable number, return True
        # step 19: if the number is not an amicable number, return False
        # step 20