  while (n && list.length) {
    const chunk = list[list.length - 1];
    if (chunk.end < chunk.start) {
      throw new Error("Bad chunk");
    }
    const start = Math.min(chunk.start, n);
    const end = Math.min(chunk.end, n);
    list.length--;
    n -= end - start;
    u8.copyWithin(buffer, start, end);
  }
  return n;
}









































































































































































































































































































































































































