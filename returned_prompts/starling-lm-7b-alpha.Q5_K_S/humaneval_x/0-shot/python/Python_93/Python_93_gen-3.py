
def encode(message):
    vowels = "aeiou"
    vowel_indices = {vowel: i for i, vowel in enumerate(vowels)}
    vowel_indices[' '] = 0
    vowel_indices['.'] = 0
    vowel_indices[','] = 0
    vowel_indices['!'] = 0

    message = message.lower()
    encoded = ""
    for char in message:
        if char in vowels:
            char_index = vowel_indices[char]
            new_char = chr(ord(char) + char_index + 1)
            if new_char in vowels:
                char_index = vowel_indices[new_char]
                new_char = chr(ord(char) + char_index + 1)
        else:
            new_char = chr(ord(char) - 32 if char.isupper() else ord(char) + 32)
        encoded += new_char
    return encoded

# Test
print(encode('test'))
print(encode('This is a message'))









































































































































































































































